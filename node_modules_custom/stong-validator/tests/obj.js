"use strict";

/* Описание работы с объектами.
 * В валидатор можно передать объект валидации:
 * var tpl = v({q:s});
 * tpl({q:'qwe'}).
 *      then(function (result) {
 *          // Валидация пройдена
 *      }, function (err) {
 *          // Валидация свалилась с ошибкой
 *      }).done(function () {
 *          // Выполнится в любом случае
 *      });
 * По умолчанию применяется жесткая проверка, т.е. любой ключ не объявленный в шаблоне является ошибкой
 * н.р.:
 *      var tpl = v({q:'s'});
 *      tpl({q:'qwe'}) // Норм
 *      tpl({q:'qwe', e:1}) // Ошибка
 *
 * Так же можно передать массив, первый элемент - строка с описание и настройками, вторая - шаблон, 3 и последующие - валидаторы
 * Первый параметр (строка) и валидаторы могут быть опущены
 */

var _ = require('lodash-node');

var v = require('../app');

module.exports = {
    // Проверяем что валидация по объекту работает
    'test-obj-72421226-c32e-4945-ae40-9ba7802cbc94': function (test) {
        var tpl = v([{q: 's'}]);
        tpl({q:'qwe'}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-d649663f-ca8f-44c5-835b-05e0afd78697': function (test) {
        var tpl = v(['obj', {q: 's'}]);
        tpl({q:'qwe'}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-8baf893c-b48b-4e03-8b72-e822d1578031': function (test) {
        var tpl = v(['obj', {q: 's'}]);
        tpl({q:'qwe'}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-bb4ab914-ca9a-4e41-af72-93ce9fcdb7cf': function (test) {
        var tpl = v(['object', {q: 's'}]);
        tpl({q:'qwe'}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-0223b507-18d2-4b31-9609-67813db280a8': function (test) {
        var tpl = v(['object', {q: 's'}, function (obj, tpl, cfg) { return _.isPlainObject(obj) && obj.q === 'qwe'; }]);
        tpl({q:'qwe'}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-9d384789-1bb5-442b-8c74-e3f386792fd0': function (test) {
        var tpl = v({q: 's'});
        tpl({q:'qwe'}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-e8dcb6f6-3096-4d48-a5a9-128f3f1f4201': function (test) {
        var tpl = v({q: 's', d: 'n'});
        tpl({q:'qwe', d: 2}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe', d: 2});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-573b5de4-a974-43a4-8361-2b993aafb28a': function (test) {
        var tpl = v({q: 's', d: 'n', r: 'b'});
        tpl({q:'qwe', d: 2, r: true}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe', d: 2, r: true});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-bceba561-ec45-4511-88e5-e11228ad28c7': function (test) {
        var tpl = v({q: 's', w: 'n', r: 'b'});
        tpl({}).
            then(function (result) {
                test.deepEqual(result, {});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-dddf2b76-f5dc-4e9c-ad56-b05f009d6890': function (test) {
        var tpl = v({q: 's reqKey', w: 'n reqKey', r: 'b reqKey'});
        tpl({q:'qwe', w: 2, r: true}).
            then(function (result) {
                test.deepEqual(result, {q:'qwe', w: 2, r: true});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-a6050b50-319b-4530-87cd-fab71dcc41f8': function (test) {
        var tpl = v({q: 's reqKey', w: 'n reqKey', r: 'b reqKey'});
        tpl({q:'', w: 0, r: false}).
            then(function (result) {
                test.deepEqual(result, {q:'', w: 0, r: false});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-552a7cae-4658-4e35-9e81-85d049a69e8f': function (test) {
        var tpl = v({q: 's reqKey toStr', w: 'n reqKey', r: 'b reqKey'});
        tpl({q:null, w: 0, r: false}).
            then(function (result) {
                test.deepEqual(result, {q:'', w: 0, r: false});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-3f34167a-28e9-45ed-8a82-2f747f060fee': function (test) {
        var tpl = v({q: 's reqKey toStr', w: 'n', r: 'b'});
        tpl({q:null}).
            then(function (result) {
                test.deepEqual(result, {q: ''});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-8ae653ee-b141-4b46-8ceb-68e3f21f8f78': function (test) {
        var tpl = v({a: {b: {c: {d: 'n'}}}});
        tpl({a:{b:{c:{d:1}}}}).
            then(function (result) {
                test.deepEqual(result, {a:{b:{c:{d:1}}}});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-3941afbd-80ab-41b3-b065-55f93f131e26': function (test) {
        var tpl = v(['obj soft', {a: 's', b: 'n'}]);
        tpl({a: 'e', c: true}).
            then(function (result) {
                test.deepEqual(result, {a: 'e', c: true});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-05d9bf54-3d3f-4d0f-9ab1-3a77cf640d95': function (test) {
        var tpl = v({a: 'any', b: 'dict v 1,2,5'});
        tpl({}).
            then(function (result) {
                test.deepEqual(result, {});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-4bdefa30-01bf-43bb-ab65-c3748b8f8f4b': function (test) {
        var tpl = v({a: 'any reqKey', b: 'dict reqKey v 1,2,5'});
        tpl({a: null, b: '5'}).
            then(function (result) {
                test.deepEqual(result, {a: null, b: '5'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-66a19165-5eed-4739-89d5-14364aba1bfb': function (test) {
        var tpl = v({a: 'any reqKey', b: 'dict v 1,2,5 reqKey'});
        tpl({a: null, b: '5'}).
            then(function (result) {
                test.deepEqual(result, {a: null, b: '5'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-33d4d907-67f2-47d2-8eba-db7dd6c19f64': function (test) {
        var tpl = v({a: ['obj reqKey', {b:'n'}]});
        tpl({a: {b: 5}}).
            then(function (result) {
                test.deepEqual(result, {a: {b: 5}});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-8a385667-a248-49cf-b19d-39b25c124424': function (test) {
        var tpl = v({a: ['obj reqKey', {b:'n reqKey'}]});
        tpl({a: {b: 5}}).
            then(function (result) {
                test.deepEqual(result, {a: {b:5}});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    // Ломаем
    'test-obj-ba41d397-9417-44f3-93fb-7fc1a5db5c67': function (test) {
        var tpl = v({q:'n'});
        tpl().
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-0f410f51-6b26-4ab6-bab2-301df3c3f157': function (test) {
        var tpl = v({q:'n'});
        tpl(undefined).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-e035a0d9-8de8-4642-8438-47dace56fe9a': function (test) {
        var tpl = v({q:'n'});
        tpl(null).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-a5da6174-e706-43ff-86dc-2bdea7b7b9f4': function (test) {
        var tpl = v({q:'n'});
        tpl({w:'wer'}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-56c192fa-454f-4349-b5c8-8efd90b7d3da': function (test) {
        var tpl = v({q:'n reqKey'});
        tpl({}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-73c70182-c1e6-47e3-84a1-e77f4f1def2a': function (test) {
        var tpl = v([{q:'n reqKey'}]);
        tpl({}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-da1c937b-38de-4eef-a73e-a58dbfc7f380': function (test) {
        var tpl = v([{q:'any reqKey'}]);
        tpl({}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-be3e7333-ab5b-4a75-b474-dfc8018b676e': function (test) {
        var tpl = v([{q:'dict reqKey'}]);
        tpl({}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-b6dcd246-3058-41b2-90ff-d2361451ef83': function (test) {
        var tpl = v({a: ['obj reqKey', {b:'n reqKey'}]});
        tpl({a: {}}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-653bc798-f707-48c4-8b22-f033b4a9bcd0': function (test) {
        var tpl = v({a: ['obj reqKey', {b:'n reqKey'}]});
        tpl({}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-71c56f86-0b09-42de-b9f9-fe3b8b6176e5': function (test) {
        var tpl = v({a: ['obj']});
        tpl({}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-8eabbd2b-38dc-44b3-b2bd-f50fd5ec5d15': function (test) {
        var tpl = v(['object', {q: 's'}, function (obj, tpl, cfg) { return _.isPlainObject(obj) && obj.q === 'qwe2'; }]);
        tpl({q:'qwe'}).
            then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-e8041ab4-49ce-4c7b-8f08-7f9d2dfcf14b': function (test) {
        var tpl = v(['object null', {q: 's'}]);
        tpl(null)
            .then(function (result) {
                test.deepEqual(result, null);
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-9899d3a6-5357-414c-b600-a2e56f1d3577': function (test) {
        var tpl = v(['object', {q: 's'}]);
        tpl(null)
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },

    
    
    // dict null && def null
    'test-obj-0d0fa779-3d67-49fa-a763-1859381fc0b7': function (test) {
        var tpl = v({a: 'dict null def a v a,b'});
        tpl({a: 'b'})
            .then(function (result) {
                test.deepEqual(result, {a: 'b'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-0971c409-f602-4d6f-a66b-29ca4203959e': function (test) {
        var tpl = v({a: 'dict null v a,b'});
        tpl({a: null})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-262ff1a7-e179-4d5c-b21c-8a6e1b23272b': function (test) {
        var tpl = v({a: 'dict v a,b'});
        tpl({a: null})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-f8f32194-d50c-42f6-8032-11e98b6dc06b': function (test) {
        var tpl = v({a: 'dict null def null v a,b'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-b10224a7-5ca5-41d2-8bd0-5ecb08d4c755': function (test) {
        var tpl = v({a: 'dict null reqKey def null v a,b'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-2d6f96af-b4f8-4e31-ad68-4da5296353a7': function (test) {
        var tpl = v({a: 'dict null def a v a,b'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: 'a'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-c2003942-0c21-4141-9771-59ba8c2a2ed5': function (test) {
        var tpl = v({a: 'dict null v a,b'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-d1f7e796-f6df-4b8a-960c-07cf7f6b54e8': function (test) {
        var tpl = v({a: 'dict null reqKey v a,b'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-dfebdfa3-2308-4425-8c3a-46547521c34c': function (test) {
        var tpl = v({a: 'dict def null reqKey v a,b'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-0c876b00-f783-49d0-994e-e27da8da3fa2': function (test) {
        var tpl = v({a: 'dict def c reqKey v a,b'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },

    
    
    // arr null && def null
    'test-obj-0db74ca9-75d5-45d4-87e4-c218c1030790': function (test) {
        var tpl = v({a: ['arr null def []', 'n']});
        tpl({a: [1, 3]})
            .then(function (result) {
                test.deepEqual(result, {a: [1, 3]});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-9a5d49f6-2b4f-44ee-95ab-64b6da955330': function (test) {
        var tpl = v({a: ['arr null', 'n']});
        tpl({a: null})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-44ba3e13-07b3-4c0a-a811-bef299b8387b': function (test) {
        var tpl = v({a: ['arr', 'n']});
        tpl({a: null})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-bfe4bb3e-acac-4a15-ad8d-63e551b82b90': function (test) {
        var tpl = v({a: ['arr null def null', 'n']});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-caa2749b-1618-46c0-ad44-9b3715c55f59': function (test) {
        var tpl = v({a: ['arr null reqKey def null', 'n']});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-8fde7101-ad44-4750-9c3a-aaf88cca6f3d': function (test) {
        var tpl = v({a: ['arr null def []', 'n']});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: []});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-cf8ae7ab-030a-46cd-9286-d78aebc808d3': function (test) {
        var tpl = v({a: ['arr null', 'n']});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-3735ca26-2039-406e-a152-41084726710c': function (test) {
        var tpl = v({a: ['arr null reqKey', 'n']});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-ffa7489d-1e31-4b41-9468-be6fbad61eeb': function (test) {
        var tpl = v({a: ['arr def null reqKey', 'n']});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },

    
    
    // bool null && def null
    'test-obj-5891d1a4-cfd0-4e89-8c7c-a14da5fce2c4': function (test) {
        var tpl = v({a: 'b null def true'});
        tpl({a: false})
            .then(function (result) {
                test.deepEqual(result, {a: false});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-cb92a379-b868-43c3-adf6-ef6ee36a53c7': function (test) {
        var tpl = v({a: 'b null'});
        tpl({a: null})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-f84cfcb2-c3c4-4b0e-8511-c7876a3448a4': function (test) {
        var tpl = v({a: 'b'});
        tpl({a: null})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-eac7711f-ad0f-45ba-a043-0933e7431f16': function (test) {
        var tpl = v({a: 'b null def null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-50e612f0-7f42-4149-9972-43e3fcc46ba9': function (test) {
        var tpl = v({a: 'b null reqKey def null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-86152c9b-5b48-41a5-abd9-e981994f1f37': function (test) {
        var tpl = v({a: 'b null def 1'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: true});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-d4298b3a-8da5-4840-8315-5c4b6d02d881': function (test) {
        var tpl = v({a: 'b null def true'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: true});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-12190c59-fd2c-47b4-8d0b-b07647af80fc': function (test) {
        var tpl = v({a: 'b null def on'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: true});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-72374760-56aa-44b1-83b0-a3d1e9d98ef1': function (test) {
        var tpl = v({a: 'b null def 1'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: true});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-e18139fc-5c40-489e-9175-7d9b72e9cb42': function (test) {
        var tpl = v({a: 'b null def false'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: false});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-3543bd57-baf5-4cd3-b0b7-f02f21650d98': function (test) {
        var tpl = v({a: 'b null def off'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: false});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-0fc11608-e96f-4c7a-90b1-e2acc7d9e90f': function (test) {
        var tpl = v({a: 'b null def 0'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: false});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-4aba69d0-6f30-4414-821b-a6b4a5f9e928': function (test) {
        var tpl = v({a: 'b null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-10eebb38-5801-423a-950d-03f23c9dcf17': function (test) {
        var tpl = v({a: 'b null reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-9fe404eb-8dd6-4cd5-9c3d-fd1e38e19c5c': function (test) {
        var tpl = v({a: 'b def null reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-8a79ebbf-7c36-453b-b242-3a57805689dd': function (test) {
        var tpl = v({a: 'b def truee reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },

    
    
    // number null && def null
    'test-obj-3da17a89-b1f5-4636-bdd4-9ba1736546ab': function (test) {
        var tpl = v({a: 'n null def 2'});
        tpl({a: 3})
            .then(function (result) {
                test.deepEqual(result, {a: 3});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-27241025-1a61-4f9e-9f03-fb8cb1c2b2f9': function (test) {
        var tpl = v({a: 'n null'});
        tpl({a: null})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-96e0265c-b968-40e8-8a34-26a31613ec63': function (test) {
        var tpl = v({a: 'n'});
        tpl({a: null})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-0bf112d1-acb0-4c07-9675-01303af68531': function (test) {
        var tpl = v({a: 'n null def null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-792bb29e-ee62-4f59-af53-be51520160d3': function (test) {
        var tpl = v({a: 'n null reqKey def null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-b6bdc33f-401a-4473-859c-11a78bd3e06b': function (test) {
        var tpl = v({a: 'n null def 1'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: 1});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-c4ef977e-7723-4fcb-a822-5a7e725d00df': function (test) {
        var tpl = v({a: 'n null def 2'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: 2});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-bdd6f317-c7a6-4ff8-b77a-cd2442df618d': function (test) {
        var tpl = v({a: 'n null def -1'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: -1});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-85b80be8-5b34-4628-af6b-0af473004460': function (test) {
        var tpl = v({a: 'n null def 1.1'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: 1.1});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-c4dfd31c-af7f-4a0a-a3ce-cf9c61eedbb2': function (test) {
        var tpl = v({a: 'n null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-68d1d9df-ba85-4794-81b7-89c9164c68b2': function (test) {
        var tpl = v({a: 'n null reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-b648a813-4268-4495-b011-1493799fdaba': function (test) {
        var tpl = v({a: 'n def null reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-11946d15-7889-4eb4-a005-9c7594063735': function (test) {
        var tpl = v({a: 'n def qq reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-0b4aaa21-1c45-42e7-9c06-fe55a3b020ef': function (test) {
        var tpl = v({a: 'n null def null toNum toFixed 2 min 0.01'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },



    // number null && def null
    'test-obj-7faaae67-2007-41e0-a86c-8328cca34c52': function (test) {
        var tpl = v({a: 's null def 2'});
        tpl({a: '3'})
            .then(function (result) {
                test.deepEqual(result, {a: 3});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-583c51d1-a26e-41d2-98cb-37ef4c0489ae': function (test) {
        var tpl = v({a: 's null def qwecv'});
        tpl({a: 'q'})
            .then(function (result) {
                test.deepEqual(result, {a: 'q'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-4f81eee0-4c00-4c78-8458-5eef7808cf63': function (test) {
        var tpl = v({a: 's null'});
        tpl({a: null})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-9b92d656-5faa-4f19-8d35-22baa0ef9e57': function (test) {
        var tpl = v({a: 's'});
        tpl({a: null})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-7cc96e4d-2d62-4c63-b81d-4958788ed7d4': function (test) {
        var tpl = v({a: 's null def null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-d0d6904a-b79b-46dc-8903-211fef48ba65': function (test) {
        var tpl = v({a: 's null reqKey def null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: null});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-f0623d64-1262-465b-886b-a6b45b2194f0': function (test) {
        var tpl = v({a: 's null def q'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: 'q'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-18a7a2aa-1ce6-4212-a5aa-9415b39e8633': function (test) {
        var tpl = v({a: 's null def 2q'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {a: '2q'});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-9652361b-e799-4154-aba3-e73e6050cbf0': function (test) {
        var tpl = v({a: 's null'});
        tpl({})
            .then(function (result) {
                test.deepEqual(result, {});
            }, function (err) {
                test.ok(false, 'Ошибки быть не должно: ' + err);
            }).done(function () { test.done(); });
    },
    'test-obj-ecd8418e-2b9a-4de8-92b8-9c27532f9108': function (test) {
        var tpl = v({a: 's null reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    },
    'test-obj-853da878-5ba2-41ba-9050-83455d34f331': function (test) {
        var tpl = v({a: 's def null reqKey'});
        tpl({})
            .then(function (result) {
                test.ok(false, 'Должна быть ошибка');
            }, function (err) {
                test.ok(err);
            }).done(function () { test.done(); });
    }

};